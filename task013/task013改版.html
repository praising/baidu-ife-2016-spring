<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<title>IFE JavaScript Task 013</title>
</head>
<body>
	<label>请输入北京今天空气质量：<input id="aqi-input" type="text"></label>
  <button id="button">确认填写</button>

  <div>您输入的值是：<span id="aqi-display">尚无录入</span></div>
<script type="text/javascript">
	(function() {
  /*	
  在注释下方写下代码
  给按钮button绑定一个点击事件
  在事件处理函数中
  获取aqi-input输入的值，并显示在aqi-display中

  要点在3个：
1、不仅要有点击事件，还有有回车事件
2、要对输入的文本进行空格和XSS处理
3、要判断输入的文本是否是1~500以内的数字

  */
  var $ = function (id) {
	  return document.getElementById(id);
  }
 	function handler(){
	var num = $("aqi-input").value;
    num = Array.prototype.filter.call(num,function(item){
          return item !=="<" && item !==">" && item !== " ";
        }).join("");
    num = parseFloat(num);
	  if((!isNaN(num)) && (num>=0) && (num<=500)){
		  $("aqi-display").innerHTML = num;
	  } else {
		  alert($("aqi-input").value + " 不是有效的AQI数值，请重新输入0-500的有效整数！");
	  }
  }

  $("button").onclick = function(){
	  handler();
  };
  
  $("aqi-input").onkeyup = function (event) {
	  if(event.keyCode === 13){
		  handler();
	  }
  };
  
})();
</script>
</body>
</html>


